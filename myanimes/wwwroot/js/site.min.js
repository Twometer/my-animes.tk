(function(){function t(n,t,i){function r(n,t){i(n.responseJSON||n,t)}var u=typeof t=="string"?t:JSON.stringify(t);jQuery.ajax({type:"POST",url:n,data:u,dataType:"json",contentType:"application/json",success:r,error:r})}const n=$('<div class="spinner"><div class="rect1"><\/div><div class="rect2"><\/div><div class="rect3"><\/div><div class="rect4"><\/div><div class="rect5"><\/div><\/div>');(function(){function o(){i.find(".anime-search-item").remove()}function h(n,t){var f,s,h,c,u;r.hide();o();for(f of n){s=$('<img width="50">');s.attr("src",f.thumbnail);h=$('<div class="col-auto"><\/div>');h.append(s);const n=f.titles[0].text;c=$('<div class="col"><\/div>');c.html(n);u=$('<div class="anime-search-item row align-items-center"><\/div>');u.append(h);u.append(c);i.append(u);const r=f.slug;u.click(function(){t.val(n);e.val(r)})}}function c(n){var u=n.val().trim();u.length===0?i.hide():(o(),r.show(),i.show(),t(s,{query:u},function(t){var i=t.searchResults;h(i,n)}))}function l(n){var t=n.parent();n=n.detach();t.append(u);u.prepend(n);i.hide();n.on("input",function(){f!==-1&&clearTimeout(f);f=setTimeout(function(){c(n)},250)});n.on("click",function(t){t.stopPropagation();n.val().trim().length>0&&i.show()})}const s="/search",i=$('<div class="anime-search-results"><\/div>'),r=$('<div class="anime-search-status"><\/div>'),u=$('<div class="anime-search-container"><\/div>'),e=$('<input name="anime-slug" type="hidden"><\/div>');r.append(n);i.append(r);u.append(i);u.append(e);var f=-1;$(".anime-search").each(function(){var n=$(this);l(n)});$(document).on("click",function(){i.hide()})})(),function(){function i(n){for(var i,r=n.serializeArray(),u={},t=0;t<r.length;t++)i=r[t],u[i.name]=i.value;return u}function r(r){r.on("submit",function(f){function c(n,t){u(r,n,t);e.prop("disabled",!1);e.html(o)}var e,o,s,h;f.preventDefault();e=r.find("button[type=submit]");o=e.html();e.prop("disabled",!0);e.html(n);s=window.location.href;h=i(r);t(s,h,c)})}function u(n,t,i){var u=n.find(".error-message"),r;t?i!=="success"?(r=t.message,u.html(r),console.error(r)):(console.log("Okay!"),f()):(u.html("Internal server error"),console.error("Cannot read response:",i))}function f(){var i=new URLSearchParams(window.location.search),n=i.get("ReturnUrl"),t="";t=n&&n!==""?n:"/";window.location.href=window.location.protocol+"//"+window.location.host+t}$("form").each(function(){const n=$(this);r(n)})}()})();