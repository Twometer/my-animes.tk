(function(){function t(){return $('<div class="spinner"><div class="rect1"><\/div><div class="rect2"><\/div><div class="rect3"><\/div><div class="rect4"><\/div><div class="rect5"><\/div><\/div>')}function i(n){for(var i,r=n.serializeArray(),u={},t=0;t<r.length;t++)i=r[t],u[i.name]=i.value;return JSON.stringify(u)}function r(t){t.on("submit",function(r){function h(n,i){u(t,n,i);f.prop("disabled",!1);f.html(e)}var f,e,o,s;r.preventDefault();f=t.find("button[type=submit]");e=f.html();f.prop("disabled",!0);f.html(n);o=window.location.href;s=i(t);jQuery.ajax({type:"POST",url:o,data:s,dataType:"json",contentType:"application/json",success:h,error:h})})}function u(n,t,i){var u=t.responseJSON,f=n.find(".error-message"),r;u?i!=="success"?(r=u.message,f.html(r),console.error(r)):console.log("Okay!"):(f.html("Internal server error"),console.error("Cannot read response:",i))}var n=t();$("form").each(function(){const n=$(this);r(n)})})();